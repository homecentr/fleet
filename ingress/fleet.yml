defaultNamespace: kube-system

dependsOn:
  - name: homecentr-metallb
  - name: homecentr-metallb-address-pools

helm:
  chart: traefik
  version: v20.5.1
  repo: https://traefik.github.io/charts
  values:
    service:
      annotations:
        metallb.universe.tf/allow-shared-ip: "ingress"

targetCustomizations:
  - name: lab
    clusterSelector:
      matchLabels:
        env: lab
    helm:
      values:
        service:
          annotations:
            metallb.universe.tf/loadBalancerIPs: 10.1.8.130
  
  - name: prod
    clusterSelector:
      matchLabels:
        env: prod
    helm:
      values:
        service:
          annotations:
            metallb.universe.tf/loadBalancerIPs: 10.1.2.130