defaultNamespace: metallb-system

helm:
  chart: metallb
  version: 0.13.7
  repo: https://metallb.github.io/metallb
  values:
    prometheus:
      scrapeAnnotations: true

diff:
  comparePatches:
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: addresspools.metallb.io
      operations:
        - {"op": "remove", "path": "/spec/conversion/webhook/clientConfig/caBundle"}
        - {"op": "remove", "path": "/status/acceptedNames/plural"}
        - {"op": "remove", "path": "/status/acceptedNames/kind"}
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: bgppeers.metallb.io
      operations:
        - {"op": "remove", "path": "/spec/conversion/webhook/clientConfig/caBundle"}
        - {"op": "remove", "path": "/status/acceptedNames/plural"}

# targetCustomizations:
#   - name: lab
#     clusterSelector:
#       matchLabels:
#         env: lab
#     helm:
#       values:
#         controller:
#           resources:
#             requests:
#               cpu: 10m
#               memory: 128Mi
#             limits:
#               cpu: 750m
#               memory: 512Mi
#         speaker:
#           resources:
#             requests:
#               cpu: 10m
#               memory: 128Mi
#             limits:
#               cpu: 750m
#               memory: 512Mi